<h1>Plan your exchange</h1>

<div class="row">
  <div class="container col-6">
    <h2>Modalities</h2>
    <% @exchange_modalities.each do |modality| %>
    <div>
      <%= simple_form_for(modality, as: :modality, method: :patch, url: modality_path(modality)) do |f|%>
      <%= f.input :duration %>
      <%= f.input :check_in %>
      <%= f.input :check_out %>
      <%= f.input :keys %>
      <%= f.input :petsitting %>
      <%= f.input :transportation %>
      <%= f.input :others %>
      <%= f.submit "Submit" %>
      <% end %>
    </div>
    <% end %>
  </div>

  <div class="container chatroom col-6"
        data-controller="exchange-subscription"
        data-exchange-subscription-exchange-id-value="<%= @exchange.id %>">
    <h1>Plan your exchange with <%= @other_user.first_name %> !</h1>

    <div class="messages" data-exchange-subscription-target="messages">
      <% @exchange.messages.each do |message| %>
        <%= render "messages/message", message: message %>
      <% end %>
    </div>
    <%= simple_form_for [@exchange, @message],
      html: { data: { action: "turbo:submit-end->exchange-subscription#resetForm" }, class: "d-flex" } do |f|%>
      <%= f.input :content, label: false, wrapper_html: {class: "flex-grow-1"} %>
      <%= f.submit "Send", class: "btn btn-primary mb-3" %>
    <% end %>
  </div>
  <%= link_to "Validate exchange", exchange_path(@exchange) %>
</div>
